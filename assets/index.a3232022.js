var it=Object.defineProperty;var q=Object.getOwnPropertySymbols;var at=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var H=(n,e,t)=>e in n?it(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,A=(n,e)=>{for(var t in e||(e={}))at.call(e,t)&&H(n,t,e[t]);if(q)for(var t of q(e))rt.call(e,t)&&H(n,t,e[t]);return n};import{c as h,a as o,b as c,w as p,r as y,o as u,d as w,e as ct,f as U,g,h as P,i as Z,j as G,k as B,v as R,F as $,l as X,u as b,m as E,n as ut,p as K,q as dt,M as _t,s as Y,t as j,x as ft,y as gt,z,A as ht,B as pt,C as mt,D as vt,E as bt,G as yt}from"./vendor.50372c04.js";const kt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=t(l);fetch(l.href,i)}};kt();const wt="modulepreload",Q={},xt="/",$t=function(e,t){return!t||t.length===0?e():Promise.all(t.map(s=>{if(s=`${xt}${s}`,s in Q)return;Q[s]=!0;const l=s.endsWith(".css"),i=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${i}`))return;const a=document.createElement("link");if(a.rel=l?"stylesheet":wt,l||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),l)return new Promise((r,d)=>{a.addEventListener("load",r),a.addEventListener("error",d)})})).then(()=>e())};var T=(n,e)=>{const t=n.__vccOpts||n;for(const[s,l]of e)t[s]=l;return t};const It={},St={class:"content-area"},Lt={class:"content-bar"},Ot=w(" Home "),Et=w(" Public Place "),Pt=w(" Blogs "),Tt=w(" Are you me? ");function Nt(n,e){const t=y("router-link"),s=y("router-view");return u(),h("div",St,[o("nav",Lt,[c(t,{to:"/"},{default:p(()=>[Ot]),_:1}),c(t,{to:"/public-place"},{default:p(()=>[Et]),_:1}),c(t,{to:"/blogs"},{default:p(()=>[Pt]),_:1}),c(t,{to:"/auth"},{default:p(()=>[Tt]),_:1})]),c(s)])}var At=T(It,[["render",Nt]]);function Mt(n,e,t="value"){return e[t]=!1,n.then(function(){e[t]=!0}),n.catch(function(){e[t]=!1}),n}function I(n,e,t="value"){return e[t]=!0,n.then(function(){e[t]=!1}),n.catch(function(){e[t]=!1}),n}const Bt=(n,e,t=1)=>Array.from({length:(e-n)/t},(s,l)=>n+l*t),Rt=(...n)=>{console.log(...n)},nn=new Proxy({},{get(n,e){const t=JSON.parse(localStorage["storage__types___"+e]);return tt(JSON.parse(localStorage[e]),t)},set(n,e,t){let s={};for(const l in t)s[l]=Object.prototype.toString.call(t[l]).slice(8,-1),s[l]="Object";return localStorage["storage__types___"+e]=JSON.stringify(W(t)),localStorage[e]=JSON.stringify(t),!0}});function W(n){const e=Object.prototype.toString.call(n).slice(8,-1);let t;if(e==="Object")t={};else if(e==="Array")t=[];else return e;for(const s in n)t[s]=W(n[s]);return t}function tt(n,e){if(typeof e=="string")return console.log(e,n,e),new window[e](n);let t;for(const s in e){s.match(/\d+/)?t=[]:t={};break}for(const s in n)t[s]=tt(n[s],e[s]);return t}console.log({VITE_SUPABASE_URL:"https://tspfjdoknsrfrglseblj.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRzcGZqZG9rbnNyZnJnbHNlYmxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDU1MjI1NzQsImV4cCI6MTk2MTA5ODU3NH0.Uf-K23bCVnxuQVjvQVSqeQoBHSr5B3qJfNaBduseNGk",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0});console.log("https://tspfjdoknsrfrglseblj.supabase.co");const Vt="https://tspfjdoknsrfrglseblj.supabase.co",Ct="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRzcGZqZG9rbnNyZnJnbHNlYmxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDU1MjI1NzQsImV4cCI6MTk2MTA5ODU3NH0.Uf-K23bCVnxuQVjvQVSqeQoBHSr5B3qJfNaBduseNGk",k=ct(Vt,Ct),V={authenticated:!1,error:null,user:null,session:null},m=U(A({},V)),C={id:null,handle:null},S=U(A({},C)),Ut=g(!0);async function et(n=null,e=null,t=null){if(m.authenticated)return;if(n=n!=null?n:localStorage.getItem("userEmail"),e=e!=null?e:localStorage.getItem("password"),n===void 0||e===void 0){m.authenticated=!1;return}const{user:s,session:l,error:i}=await k.auth.signIn({email:n,password:e});if(i){Object.assign(m,{authenticated:!1,error:i});return}Object.assign(S,(await k.from("user_data").select("*").eq("id",s.id)).data[0]),Object.assign(m,{authenticated:!0,user:s,session:l}),console.log("Logged in"),t&&(localStorage.setItem("userEmail",n),localStorage.setItem("password",e),console.log("Details saved locally"))}async function Jt(){localStorage.setItem("userEmail",void 0),localStorage.setItem("password",void 0),console.log("logging out..."),await k.auth.signOut(),Object.assign(m,V),Object.assign(S,C),console.log(V,C),console.log("logged out.")}I(et(),Ut).then(()=>{console.log(m),console.log(S)});const M={loadPost:0,loadTitles:0,submitPost:0},Dt={loadPost:10,loadTitles:10,submitPost:3},Ft="Requests are too frequent!";function J(n){if(M[n]<Dt[n])M[n]+=1,setTimeout(()=>{M[n]-=1},5e3);else throw Error(Ft)}async function qt(n){J("loadPost");const{data:e,error:t}=await k.from("posts").select("content, modified").eq("title",n);if(t)throw t;return e.length===0?null:{title:n,content:e[0].content,resources:[],modified:new Date(e[0].modified)}}async function Ht(){J("loadTitles");const{data:n,error:e}=await k.from("posts").select("title");if(e)throw e;return n.map(({title:t})=>t)}async function on(n,e){if(J("submitPost"),!m.authenticated){console.error("Cant submit, not authenticated");return}const{error:t,data:s}=await k.from("posts").upsert({title:n,content:e,owner:S.id,modified:new Date().toISOString()});if(t)throw t;return console.log(s),s}const jt=o("label",{for:"markdown-input"}," Select Blog: ",-1),zt={id:"title-list"},Qt=["value"],Zt=["value","disabled"],Gt=P({props:{disabled:{type:Boolean},buttonText:null,notExistsText:null,onSubmit:null},setup(n){const e=n,t=g(!1),s=g([]),l=g(""),i=Z(()=>!s.value.includes(l.value));async function a(){s.value=await I(Ht(),t)}return G(a),(r,d)=>(u(),h($,null,[jt,B(o("input",{id:"markdown-input","onUpdate:modelValue":d[0]||(d[0]=v=>l.value=v),type:"search",list:"title-list",style:{width:"20em"}},null,512),[[R,l.value]]),o("datalist",zt,[(u(!0),h($,null,X(s.value,v=>(u(),h("option",{key:v,value:v},null,8,Qt))),128))]),o("input",{type:"submit",value:b(i)&&n.notExistsText?n.notExistsText:n.buttonText,disabled:n.disabled,style:{width:"7em"},onClick:d[1]||(d[1]=v=>e.onSubmit(l.value))},null,8,Zt)],64))}}),Xt=P({props:{source:null},setup(n){const e=n;return console.log("Rerendered"),E(()=>e.source,()=>Rt("reran",e.source)),ut(()=>console.log("Updated")),G(()=>console.log("Mounted")),(t,s)=>(u(),K(b(Y),{source:n.source,html:!0,plugins:[{plugin:b(dt),options:{re:/<html>!([^]*?)<\/html>/}},{plugin:b(_t)}]},null,8,["source","plugins"]))}});const Kt=o("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"},null,-1),Yt=P({props:{title:null,isLoading:{type:Boolean},externalText:null,externalResources:null},emits:["update:isLoading"],setup(n,{emit:e}){const t=n,s=g(!1),l=g(null);let i=!1;const a=Z({get(){return t.isLoading},set(_){console.log("isLoading",_),e("update:isLoading",_)}});let r,d;if(t.externalText!==void 0)console.log("taking from editor"),r=j(t,"externalText"),d=j(t,"externalResources"),E(r,function(){i=!1});else{const _=g("");r=ft(_),d=g([]);const f=async()=>{t.title!==""&&({content:_.value,resources:d.value}=await I(Mt(qt(t.title),s),a),F())};f(),E(()=>t.title,f)}let v=1;const L=U([{data:"",key:0}]);D(),E(()=>[r.value,t.title],D);function D(){const _=[`# ${t.title}`].concat(r.value.split(/\s*\n\s*\n/));let f=0,x=[];for(const{count:O,added:ot,removed:st,value:lt}of gt(L.map(({data:N})=>N),_)){if(ot){x.concat(Bt(f,f+O)),L.splice(f,0,...lt.map(N=>({data:N,key:v++}))),f+=O;continue}if(st){L.splice(f,O);continue}f+=O}nt(x)}function nt(_){_[0]}function F(){if(!i){for(const _ of document.querySelectorAll("#blog-preview script")){const f=document.createElement("script");f.innerHTML="{"+_.innerHTML+"}",_.parentElement.appendChild(f),_.remove()}i=!0}}return(_,f)=>(u(),h($,null,[Kt,o("div",{id:"blog-preview",class:"card",onFocusin:F},[(u(!0),h($,null,X(b(L),x=>(u(),K(Xt,{ref_for:!0,ref_key:"markdown",ref:l,source:x.data,key:x.key},null,8,["source"]))),128))],32)],64))}}),Wt={class:"content-column"},te=o("br",null,null,-1),ee={class:"content-row tight"},ne=w(" Edit "),oe=o("br",null,null,-1),se=P({setup(n){const e=g(""),t=g(!1);function s(l){console.log(l),e.value=l}return(l,i)=>{const a=y("router-link");return u(),h("div",Wt,[te,o("div",ee,[o("div",null,[c(Gt,{"button-text":t.value?"Loading":"Load",disabled:t.value,"on-submit":s},null,8,["button-text","disabled"])]),c(a,{to:"/blog-edit"},{default:p(()=>[ne]),_:1})]),oe,c(Yt,{"is-loading":t.value,"onUpdate:is-loading":i[0]||(i[0]=r=>t.value=r),title:e.value},null,8,["is-loading","title"])])}}}),le={class:"nugget-container"},ie=["onSubmit"],ae={key:0},re=["disabled"],ce={key:1},ue=o("td",null,[o("label",{for:"email"},"Email:")],-1),de=o("td",null,[o("label",{for:"password"},"Password:")],-1),_e=["value","disabled"],fe={setup(n){const e=g(""),t=g(""),s=g(!1);async function l(){try{console.log("logging..."),await I(et(e.value,t.value,!0),s)}catch(a){alert(a.error_description||a.error_message)}}async function i(){try{console.log("logging..."),await I(Jt(),s)}catch(a){alert(a.error_description||a.error_message)}}return(a,r)=>(u(),h("div",le,[o("form",{class:"card tight",onSubmit:ht(l,["prevent"])},[b(m).authenticated?(u(),h("div",ae,[o("h1",null,"Welcome, "+z(b(S).handle),1),o("button",{disabled:s.value,onclick:i},z(s.value?"Bye...":"Log Out"),9,re)])):(u(),h("table",ce,[o("tr",null,[ue,o("td",null,[B(o("input",{"onUpdate:modelValue":r[0]||(r[0]=d=>e.value=d),class:"inputField",type:"email",name:"email"},null,512),[[R,e.value]])])]),o("tr",null,[de,o("td",null,[B(o("input",{"onUpdate:modelValue":r[1]||(r[1]=d=>t.value=d),class:"inputField",type:"password",name:"password"},null,512),[[R,t.value]])])]),o("tr",null,[o("input",{type:"submit",value:s.value?"loading":"Log In",disabled:s.value},null,8,_e)])]))],40,ie)]))}};var ge="/assets/blog_button.8c697ef8.png",he="/assets/public_button.11df71ad.png";const pe={},me=o("h1",null,"This is the main page yay!",-1),ve={class:"card"},be=o("div",{class:"text-content"},[o("h2",null,"What stuff exists here"),o("p",null," This site has a small web app I made for myself to write posts. Perhaps once the organization gets musty enough a system will grow naturally, just like mould on a sandwich. ")],-1),ye={class:"content-column"},ke={class:"content-row"},we={class:"flex-child-fill square mid-margin"},xe=o("img",{class:"img-btn",src:ge},null,-1),$e={class:"flex-child-fill square mid-margin"},Ie=o("img",{class:"img-btn",src:he},null,-1);function Se(n,e){const t=y("router-link");return u(),h($,null,[me,o("div",ve,[be,o("div",ye,[o("div",ke,[o("div",we,[c(t,{to:"/blog-edit"},{default:p(()=>[xe]),_:1})]),o("div",$e,[c(t,{to:"/public-place"},{default:p(()=>[Ie]),_:1})])])])])],64)}var Le=T(pe,[["render",Se]]),Oe="/assets/fetus.2d52290a.png";const Ee={},Pe={class:"card"},Te=o("div",{class:"title"},[o("h1",null,"Public Place")],-1),Ne=o("div",{class:"text-content"},[o("h1",null,"Hello Stranger!"),o("p",null," This is the Public Place. For Public People. Hellooo the public! Please gaze at my various credentials or whatever. ")],-1),Ae={class:"text-content"},Me=o("h1",null," About Me",-1),Be=o("img",{class:"side-img",src:Oe},null,-1),Re=o("p",null," I dont feel particularly inclined to write about boring stuff right now. So youre going to have to settle for a nice picture of me: ",-1),Ve={class:"link-list"},Ce=o("div",{class:"block-link"},[o("p",null,"Resume BROKEN PLEASE FIX ME")],-1),Ue=o("div",{class:"block-link"},[o("p",null,"GitHub BROKEN PLEASE FIX ME")],-1),Je=o("div",{class:"block-link"},[o("p",null,"Linkedin BROKEN PLEASE FIX ME")],-1),De=o("div",{class:"block-link"},[o("p",null,"Escape From The Public")],-1);function Fe(n,e){const t=y("router-link");return u(),h("div",Pe,[Te,Ne,o("div",Ae,[Me,Be,Re,o("div",null,[o("div",Ve,[o("ul",null,[o("li",null,[c(t,{to:"blog/blog1.html"},{default:p(()=>[Ce]),_:1})]),o("li",null,[c(t,{to:"blog/blog1.html"},{default:p(()=>[Ue]),_:1})]),o("li",null,[c(t,{to:"blog/blog1.html"},{default:p(()=>[Je]),_:1})]),o("li",null,[c(t,{to:"index.html"},{default:p(()=>[De]),_:1})])])])])])])}var qe=T(Ee,[["render",Fe]]);const He={},je={class:"centered"},ze={class:"tight"},Qe=o("h1",null," i am a failure ",-1),Ze=w(" Return Home ");function Ge(n,e){const t=y("router-link");return u(),h("div",je,[o("div",ze,[Qe,c(t,{to:"/"},{default:p(()=>[Ze]),_:1})])])}var Xe=T(He,[["render",Ge]]);const Ke=[{path:"/",component:Le},{path:"/auth",component:fe},{path:"/blogs",component:se},{path:"/public-place",component:qe},{path:"/blog-edit",component:pt(()=>$t(()=>import("./NewBlog.857f34ee.js"),["assets/NewBlog.857f34ee.js","assets/NewBlog.1c1d86d6.css","assets/vendor.50372c04.js"]))},{path:"/:pathMatch(.*)*",component:Xe}],Ye=mt({history:vt(),routes:Ke}),We=bt();yt(At).use(Ye).use(We).use(Y).mount("#app");export{T as _,on as a,I as b,Gt as c,Yt as d,Ut as e,m as f,qt as l,nn as s};
